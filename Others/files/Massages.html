<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Admin Dashboard â€” BlackForge Tech</title>
  <link rel="stylesheet" href="Massages.css">
</head>
<body class="fade-in">

<!-- ================= LOGIN ================= -->
<div class="card slide-up" id="loginCard">
  <h3>Admin Login</h3>
  <input type="email" id="adminEmail" placeholder="Email">
  <input type="password" id="adminPass" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<!-- ================= DASHBOARD ================= -->
<div id="dashboard" style="display:none;">
  <a style="display:flex; justify-content: space-evenly; align-items:center; margin-bottom:12px;">
    <div class="pill small">Role: <span id="roleLabel"></span></div>
    <button onclick="logout()">Logout</button>
  </a>

  <!-- ===== STATUS ANALYTICS ===== -->
  <div class="analytics">
    <div class="stat-card">
      <span>Total</span>
      <strong id="totalCount">0</strong>
    </div>
    <div class="stat-card pending">
      <span>Pending</span>
      <strong id="pendingCount">0</strong>
    </div>
    <div class="stat-card contacted">
      <span>Contacted</span>
      <strong id="contactedCount">0</strong>
    </div>
  </div>

  <!-- ===== LEADS TOOLBAR ===== -->
  <div class="toolbar">
    <div class="pill">Leads: <span id="leadCount">0</span></div>
    <button onclick="exportCSV()">Export CSV</button>
  </div>

  <!-- Loader -->
  <div id="loader" class="loader">Loading leads...</div>

  <!-- Leads Table -->
  <table class="table" id="leadsTable">
    <thead>
      <tr>
        <th>Name</th>
        <th>Contact</th>
        <th>Service</th>
        <th>Message</th>
        <th>Status</th>
        <th>Action</th>
        <th>When</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- ===== ACTIVITY LOGS ===== -->
  <div class="card" id="activityLogsCard">
    <h3>Activity Logs</h3>
    <div class="log-toolbar">
      <input type="text" id="logSearch" placeholder="Search logs..." oninput="filterLogs()">
    <a style="display:flex; width:40%;">  <input type="date" id="startDate" onchange="filterLogs()">
      <input type="date" id="endDate" onchange="filterLogs()"></a>
      <button onclick="exportLogsCSV()">Export Logs CSV</button>
    </div>
    <table class="table" id="logsTable">
      <thead>
        <tr>
          <th>Admin Email</th>
          <th>Role</th>
          <th>Action</th>
          <th>Lead ID</th>
          <th>From</th>
          <th>To</th>
          <th>Time</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>


<!-- ================= LEAD DETAILS MODAL ================= -->
<div id="leadDetailBox">
  <div class="alert-content">
    <h3>Lead Details</h3>
    <div id="leadDetailContent"></div>
    <div style="text-align:center; margin-top:14px;">
      <button onclick="closeLeadDetails()">Close</button>
    </div>
  </div>
</div>


<!-- ================= ALERT / TOAST ================= -->
<div id="alertBox1" class="alert-box">
  <div class="alert-content">
    <p id="alertMessage1"></p>
    <button onclick="closeAlert1()">OK</button>
  </div>
</div>

<script type="module" src="./Massages.js"></script>
</body>
</html>
